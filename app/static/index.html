<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NetProbe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="bg-neutral-950 text-neutral-100">
    <div class="max-w-6xl mx-auto p-6 space-y-6">
      <header class="flex items-center justify-between">
        <h1 class="text-2xl font-semibold">NetProbe</h1>
        <a href="/api/healthz" class="text-sm text-neutral-400 hover:text-neutral-200">health</a>
      </header>

      <section class="grid grid-cols-1 md:grid-cols-3 gap-4" id="summary">
        <div class="bg-neutral-900 rounded-lg p-4"><div class="text-sm text-neutral-400">TCP samples (10m)</div><div class="text-2xl font-semibold" id="sum-tcp">—</div></div>
        <div class="bg-neutral-900 rounded-lg p-4"><div class="text-sm text-neutral-400">DNS samples (10m)</div><div class="text-2xl font-semibold" id="sum-dns">—</div></div>
        <div class="bg-neutral-900 rounded-lg p-4"><div class="text-sm text-neutral-400">HTTP samples (10m)</div><div class="text-2xl font-semibold" id="sum-http">—</div></div>
      </section>

      <section class="grid grid-cols-1 md:grid-cols-2 gap-4" id="cards"></section>

      <section class="bg-neutral-900 rounded-lg p-4">
        <h2 class="text-lg font-medium mb-2">Live Latency</h2>
        <canvas id="latencyChart" height="120"></canvas>
      </section>

      <section class="bg-neutral-900 rounded-lg p-4 space-y-3">
        <div class="flex flex-wrap items-end gap-3">
          <div>
            <label class="text-xs text-neutral-400">Kind</label>
            <select id="hist-kind" class="bg-neutral-800 rounded px-2 py-1">
              <option value="tcp">TCP</option>
              <option value="dns">DNS</option>
            </select>
          </div>
          <div>
            <label class="text-xs text-neutral-400">Minutes</label>
            <select id="hist-min" class="bg-neutral-800 rounded px-2 py-1">
              <option>30</option>
              <option selected>60</option>
              <option>180</option>
              <option>720</option>
            </select>
          </div>
          <div>
            <label class="text-xs text-neutral-400">Step (sec)</label>
            <select id="hist-step" class="bg-neutral-800 rounded px-2 py-1">
              <option>30</option>
              <option selected>60</option>
              <option>300</option>
            </select>
          </div>
          <div id="hist-filter-host" class="hidden">
            <label class="text-xs text-neutral-400">Host</label>
            <input id="hist-host" class="bg-neutral-800 rounded px-2 py-1" placeholder="1.1.1.1" />
          </div>
          <div id="hist-filter-fqdn" class="hidden">
            <label class="text-xs text-neutral-400">FQDN</label>
            <input id="hist-fqdn" class="bg-neutral-800 rounded px-2 py-1" placeholder="example.com" />
          </div>
          <button id="hist-run" class="ml-auto bg-blue-600 hover:bg-blue-500 text-white rounded px-3 py-1">Run</button>
        </div>
        <div>
          <canvas id="historyChart" height="140"></canvas>
        </div>
      </section>

      <section class="bg-neutral-900 rounded-lg p-4 space-y-3">
        <h2 class="text-lg font-medium">Settings</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <h3 class="font-medium mb-2">TCP Targets</h3>
            <div id="tcp-list" class="space-y-1 text-sm"></div>
            <div class="flex gap-2 mt-2">
              <input id="tcp-host" placeholder="host" class="bg-neutral-800 rounded px-2 py-1 w-full" />
              <input id="tcp-port" type="number" placeholder="port" class="bg-neutral-800 rounded px-2 py-1 w-24" />
            </div>
            <div class="flex gap-2 mt-2">
              <input id="tcp-interval" type="number" step="0.5" placeholder="interval" class="bg-neutral-800 rounded px-2 py-1 w-32" />
              <button id="tcp-add" class="bg-blue-600 hover:bg-blue-500 text-white rounded px-3 py-1">Add</button>
            </div>
          </div>
          <div>
            <h3 class="font-medium mb-2">DNS Jobs</h3>
            <div id="dns-list" class="space-y-1 text-sm"></div>
            <div class="flex gap-2 mt-2">
              <input id="dns-fqdn" placeholder="fqdn" class="bg-neutral-800 rounded px-2 py-1 w-full" />
              <input id="dns-resolvers" placeholder="resolvers (comma)" class="bg-neutral-800 rounded px-2 py-1 w-full" />
            </div>
            <div class="flex gap-2 mt-2">
              <input id="dns-interval" type="number" step="0.5" placeholder="interval" class="bg-neutral-800 rounded px-2 py-1 w-32" />
              <button id="dns-add" class="bg-blue-600 hover:bg-blue-500 text-white rounded px-3 py-1">Add</button>
            </div>
          </div>
          <div>
            <h3 class="font-medium mb-2">HTTP Jobs</h3>
            <div id="http-list" class="space-y-1 text-sm"></div>
            <div class="flex gap-2 mt-2">
              <input id="http-url" placeholder="https://..." class="bg-neutral-800 rounded px-2 py-1 w-full" />
              <select id="http-method" class="bg-neutral-800 rounded px-2 py-1 w-28"><option>GET</option><option>HEAD</option></select>
            </div>
            <div class="flex gap-2 mt-2">
              <input id="http-interval" type="number" step="0.5" placeholder="interval" class="bg-neutral-800 rounded px-2 py-1 w-32" />
              <button id="http-add" class="bg-blue-600 hover:bg-blue-500 text-white rounded px-3 py-1">Add</button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script type="module" src="/app.js"></script>
  </body>
  </html>

